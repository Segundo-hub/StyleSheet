<script>
import { onMount } from 'svelte';
import { fly } from 'svelte/transition'
import { AuthContext } from '../../store';
export let active = '', username = '', email = '', role = '';

const deleteUser = () => {
    AuthContext.logoutUser()
    localStorage.clear()
}
onMount( () => {

})

</script>

{#if active }
<div class="user-info" transition:fly="{{y: 10, duration: 500 }}">
    <header class="user--info-header">
        <div class="nav-expand">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="var(--orange-200)" class="bi bi-person-circle"  viewBox="0 0 489.7 489.7" style="enable-background:new 0 0 489.7 489.7;" xml:space="preserve">
                <path d="M369.4,253.3c49.7-27.8,89.8,21.7,113.3,19.9c4.7-8.5,7-18.3,7-28.8c0-8.9-1.9-17.1-5.1-24.5    C444.2,174.3,356,202.8,356,202.8c-5.4,0-10.1-4.7-10.1-10.1s4.7-10.1,10.1-10.1c0,0,96.9-24.6,127.1,17.5    c4.3-8.2,6.6-17.9,6.6-28c0-24.5-14-45.5-33.8-53.6c-0.4,0.4-37,31.8-79.3,19.4c-5.4,0-10.1-5.1-9.7-10.5c0-5.4,4.7-10.1,10.5-9.7    c33,13.1,53.6-5.8,60.6-10.5c-13-43.7-54.7-49.5-56.2-49.4c0,0-65.1,40.3-58.8,110.4c0.5,5.4-4.3,10.5-9.7,10.5h-0.4    c-5.4,0-10-4.3-10.1-9.7C301,87.4,363.8,48.2,365,47.8C359.9,20.6,338.5,0,312.9,0c-28.8,0-51.7,25.6-51.7,57.1s0,343.9,0,375.4    s23.3,57.1,51.7,57.1c26.1,0,47.6-21.2,51.1-48.3c0,0-13.9-44.7-55.4-48.1c-5.5-0.5-8.9-6.6-8.2-12c1.2-5.4,6.6-8.9,12-8.2    c49.1,4.5,71.6,59.5,73.1,59.5c28.8,0,51.7-25.6,51.7-57.1c28.8,0,51.7-25.6,51.7-57.1c0-8.9-1.9-17.5-5.1-24.9    c-23.7,1.7-71.8-45-104.6-22.3c-4.2,2.9-8.5,6.7-10.1,10.2c-2.3,5.1-8.2,7.4-13.2,5.4c-5.1-2.3-7.4-8.2-5.4-13.2    C354.9,263.5,364,256.3,369.4,253.3z M302.8,294.5c0.9,5.4-2.7,10.9-8.5,11.7c-0.8,0.1-10.4,0.6-11.7-8.5    c-6.4-46.1,32.7-87.9,35.7-95.2c2.7-5.1,8.5-7,13.6-4.3s7,8.5,4.3,13.6C332.3,219.9,296.8,256.7,302.8,294.5z M404.2,294.9    c2.3-5.1,8.2-7.8,13.2-5.4c5.1,2.3,7.8,8.2,5.4,13.2c-8.5,20.6-49.4,71.5-103.8,46.2c-5-2.3-7.8-8.2-5.4-13.2    c2.3-5.1,8.2-7.4,13.2-5.4C366.3,349.9,398,310.9,404.2,294.9z"/>
                <path d="M139.2,273.6c1.9,5.1-0.4,10.9-5.4,13.2c-5.1,1.9-10.9-0.4-13.2-5.4c-1.6-3.5-5.9-7.3-10.1-10.2    c-32.7-22.7-80.8,24-104.6,22.3c-3.1,7.4-5.1,15.9-5.1,24.9c0,31.5,22.9,57.1,51.7,57.1c0,31.5,22.9,57.1,51.7,57.1    c1.5,0,23.9-54.9,73.1-59.5c5.4-0.8,10.9,2.7,12,8.2c0.8,5.4-2.6,11.6-8.2,12c-41.5,3.4-55.4,48.1-55.4,48.1    c3.5,27.1,25.1,48.3,51.1,48.3c28.4,0,51.7-25.6,51.7-57.1s0-343.9,0-375.4S205.6,0.1,176.8,0.1c-25.6,0-47,20.6-52.1,47.8    c1.2,0.4,64,39.6,62.2,121.2c-0.1,5.5-4.7,9.7-10.1,9.7h-0.4c-5.4,0-10.2-5.1-9.7-10.5c6.3-70.1-58.8-110.4-58.8-110.4    c-1.5-0.1-43.2,5.7-56.2,49.4c7,4.7,27.7,23.5,60.6,10.5c5.8-0.4,10.5,4.3,10.5,9.7c0.4,5.4-4.3,10.5-9.7,10.5    c-42.2,12.3-78.9-19-79.3-19.4C14,126.8,0,147.7,0,172.2c0,10.1,2.3,19.8,6.6,28c30.3-42.2,127.2-17.6,127.2-17.6    c5.4,0,10.1,4.7,10.1,10.1s-4.7,10.1-10.1,10.1c0,0-88.2-28.5-128.6,17.1c-3.1,7.4-5.1,15.5-5.1,24.5c0,10.5,2.3,20.2,7,28.8    c23.5,1.8,63.6-47.6,113.3-19.9C125.8,256.3,134.9,263.5,139.2,273.6z M153.6,211.8c-2.7-5.1-0.8-10.9,4.3-13.6    c5.1-2.7,10.9-0.8,13.6,4.3c3,7.3,42.1,49.1,35.7,95.2c-1.3,9.1-10.8,8.6-11.7,8.5c-5.8-0.8-9.4-6.2-8.5-11.7    C193,256.7,157.5,219.9,153.6,211.8z M162.9,330.3c5.1-1.9,10.9,0.4,13.2,5.4c2.3,5.1-0.4,10.9-5.4,13.2    c-54.4,25.3-95.2-25.6-103.8-46.2c-2.3-5.1,0.4-10.9,5.4-13.2c5.1-2.3,10.9,0.4,13.2,5.4C91.8,310.9,123.5,349.9,162.9,330.3z"/>
            </svg>
            <p class="role">{role}</p>
        </div>
        <div class="user-data">
            <p class="info-name pd-1">{ username }</p>
            <p class="info-email pd-1">{ email }</p>
        </div>
    </header>
    <nav>
        <li>
            <a href="#" class="user--menu-item">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="1.25em" height="1.25em" class="smaller s-mr-05" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="M24.931 27C24.4711 23.2453 21.7975 21 19.4657 21H12.5776C10.1987 21 7.52889 23.2531 7.06914 27H24.931ZM28 28.9565V28.1502C28 22.5534 24.1444 18 19.4657 18H12.5776C7.8556 18 4 22.5534 4 28.1502V28.9565C4 29.5257 4.38989 30 4.86643 30H27.1336C27.6101 30 28 29.5257 28 28.9565Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M16 13C18.2091 13 20 11.2091 20 9C20 6.79086 18.2091 5 16 5C13.7909 5 12 6.79086 12 9C12 11.2091 13.7909 13 16 13ZM16 16C19.866 16 23 12.866 23 9C23 5.13401 19.866 2 16 2C12.134 2 9 5.13401 9 9C9 12.866 12.134 16 16 16Z"></path></svg>
                Profile
            </a>
        </li>
        <li class="s-spy-1">
            <hr class="separator">
        </li>
        <li>
            <span class="user--menu-item close-user" on:click="{deleteUser}" role="button">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="1.25em" height="1.25em" class="smaller s-mr-05" fill="currentColor"><path d="M2.5 3C3.32843 3 4 3.67157 4 4.5L4 27.5C4 28.3284 3.32843 29 2.5 29C1.67157 29 1 28.3284 1 27.5L1 4.5C1 3.67157 1.67157 3 2.5 3Z"></path><path d="M18.5 3C19.3284 3 20 3.67157 20 4.5V9.5C20 10.3284 19.3284 11 18.5 11C17.6716 11 17 10.3284 17 9.5V4.5C17 3.67157 17.6716 3 18.5 3Z"></path><path d="M18.5 21C19.3284 21 20 21.6716 20 22.5V27.5C20 28.3284 19.3284 29 18.5 29C17.6716 29 17 28.3284 17 27.5V22.5C17 21.6716 17.6716 21 18.5 21Z"></path><path d="M20 27.5C20 28.3284 19.3284 29 18.5 29H2.5C1.67157 29 1 28.3284 1 27.5C1 26.6716 1.67157 26 2.5 26L18.5 26C19.3284 26 20 26.6716 20 27.5Z"></path><path d="M20 4.5C20 5.32843 19.3284 6 18.5 6L2.5 6C1.67157 6 1 5.32843 1 4.5C1 3.67157 1.67157 3 2.5 3L18.5 3C19.3284 3 20 3.67157 20 4.5Z"></path><path d="M31 15.5C31 16.3284 30.3284 17 29.5 17L12.5 17C11.6716 17 11 16.3284 11 15.5C11 14.6716 11.6716 14 12.5 14L29.5 14C30.3284 14 31 14.6716 31 15.5Z"></path><path d="M23.4421 9.44212C24.0316 8.85263 24.9874 8.85263 25.5768 9.44212L30.5579 14.4232C31.1474 15.0126 31.1474 15.9684 30.5579 16.5579C29.9684 17.1474 29.0126 17.1474 28.4232 16.5579L23.4421 11.5768C22.8526 10.9874 22.8526 10.0316 23.4421 9.44212Z"></path><path d="M30.5579 14.4421C29.9684 13.8526 29.0126 13.8526 28.4232 14.4421L23.4421 19.4232C22.8526 20.0126 22.8526 20.9684 23.4421 21.5579C24.0316 22.1474 24.9874 22.1474 25.5768 21.5579L30.5579 16.5768C31.1474 15.9874 31.1474 15.0316 30.5579 14.4421Z"></path></svg>
            Close Session
            </span>
        </li>
    </nav>
</div>
{/if}

<style>
.user-info{
    min-width: 250px;
    position: absolute;
    right: 10px;
    top: var(--height-nav--top);
    background-color: var(--grey-light);
    border-radius: 3px;
    padding: 1rem;
}
.user--info-header{
    margin-bottom: 1rem;
}
.nav-expand{
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 .5rem .5rem;
}
.role{
    font-weight: normal;
}
.info-name{
    font-weight: 600;
    font-family: 'Roboto';
    font-size: 1.2rem;
}
.info-email{
    font-weight: 400;
    font-size: .9rem;
}
.user--menu-item{
    display: flex;
    align-content: center;
    align-items: center;
    padding: .25rem .5rem;
}
.user-data{
    margin-top: .5rem;
}
.close-user{
    color: #26898e;
}
.s-mr-05{
    margin-right: .25rem;
}
</style>